<link rel="stylesheet" href="/css/filePage.css">
<div id="filePage">
    <div class="heading">
        <a href="/" style="text-decoration: none;">
            <h1 class="headingText">CSV UPLOAD</h1>
        </a>
    </div>
    <div id="search-box">
        <div class="div">
            <span>Search Using</span>
            <select name="option" id="opt" class="select">
                <% for(let i=0;i<head.length;i++){ %>
                    <option value="<%= i %>">
                        <%= head[i].toUpperCase() %>
                    </option>
                    <% } %>
            </select>
        </div>
        <input type="text" name="search" id="search" onkeyup="searchTable()" placeholder="Search...">
    </div>

    <div class="container">
        <table id="sortTable">
            <thead>
                <tr>
                    <% for(let i=0;i<head.length;i++){ %>
                        <th>
                            <div class="headRowHeading">
                                <%= head[i] %>
                                    <i class="fa-solid"></i>
                            </div>
                        </th>
                        <% } %>
                </tr>
            </thead>
            <tbody>
                <% for(let i=0;i<data.length;i++){ %>
                    <tr>
                        <% for(let j=0;j<head.length;j++){ %>
                            <td>
                                <%= data[i][head[j]] %>
                            </td>
                            <% } %>
                    </tr>
                    <% } %>
            </tbody>
        </table>
    </div>

    <!-- pagination -->
    <nav id="pagingNav" aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item">
                <a href="/show/filecsv/?file_id=<%= file._id %>&page=1" class="page-link">First</a>
            </li>
            <li class="page-item">
                <% if(page!=1){ %>
                    <a href="/show/filecsv/?file_id=<%= file._id %>&page=<%= page-1 %>" class="page-link"></a>
                    <% } %>
            </li>
            <li class="page-item">
                <a class="page-link active-page">
                    <%= page %>
                </a>
            </li>
            <li class="page-item">
                <% if(page!=totalPages){ %>
                    <a href="/show/filecsv/?file_id=<%= file._id %>&page=<%= page+1 %>" class="page-link">
                        <%= page+1 %>
                    </a>
                    <% } %>
            </li>
            <li class="page-item">
                <a href="/show/filecsv/?file_id=<%= file._id %>&page=<%= totalPages %>" class="page-link">Last</a>
            </li>
        </ul>
    </nav>
</div>

<script src="/js/file.js"></script>